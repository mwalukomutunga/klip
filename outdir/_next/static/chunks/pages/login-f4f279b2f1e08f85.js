(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{545:function(e,r,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return s(9697)}])},6643:function(e,r,s){"use strict";var n=s(9669),t=s.n(n),a=s(3361),o=function(e){return toast(e,{position:"bottom-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})};t().defaults.baseURL="https://ims.crionline.africa/api/",t().interceptors.request.use((function(e){var r,s,n,t,o=a.Z.getState();return(null===(r=o.user)||void 0===r||null===(s=r.user)||void 0===s?void 0:s.token)&&(e.headers.Authorization="Bearer ".concat(null===(n=o.user)||void 0===n||null===(t=n.user)||void 0===t?void 0:t.token)),e})),t().interceptors.response.use((function(e){return"201"===(null===e||void 0===e?void 0:e.status)&&o("Request was successful"),e}),(function(e){var r;if(null===(r=e.response)||void 0===r?void 0:r.status){var s=e.response,n=s.data;switch(s.status){case 400:if(null===n||void 0===n?void 0:n.errors){var t=[];for(var a in n.errors)n.errors[a]&&t.push(n.errors[a]);o(t.flat().join("\n"))}else o(n);break;case 201:o("request was successful");break;case 403:case 401:o("You are not authorised to access this page");break;case 404:o("The resource you are accessing is not available at the moment");break;case 500:case 501:case 503:o("Server failed");break;default:o("Failed to load resources")}}}));var c=function(e){return e.data},i={get:function(e){return t().get(e).then(c)},post:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t().post(e,r).then(c)},put:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t().put(e,r).then(c)},del:function(e){return t().delete(e).then(c)}};r.Z=i},9697:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return h}});var n=s(5893),t=s(1664),a=s.n(t),o=s(9473),c=s(7294),i=s(6643),u=s(1163),l=s(9094),d=s(2920);s(4213);function f(e,r,s){return r in e?Object.defineProperty(e,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[r]=s,e}function h(){var e=(0,c.useState)({username:"",password:""}),r=e[0],s=e[1],t=(0,o.I0)(),h=(0,u.useRouter)();(0,c.useEffect)((function(){}),[]);var m=function(e){e.persist();var r=e.target,n="checkbox"===r.type?r.checked:r.value,t=r.name;s((function(e){return function(e){for(var r=1;r<arguments.length;r++){var s=null!=arguments[r]?arguments[r]:{},n=Object.keys(s);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),n.forEach((function(r){f(e,r,s[r])}))}return e}({},e,f({},t,n))}))},p=function(e){e.preventDefault(),i.Z.post("token",r).then((function(e){e?(null===e||void 0===e?void 0:e.reset)?(t((0,l.cn)(e)),h.push("/authrecovery")):(t((0,l.cn)(e)),h.push("/bio")):(h.push("/login"),(0,d.Am)("Invalid credentials. Try again!",{position:"bottom-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}))}))};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h4",{className:"mt-0",children:"Sign In"}),(0,n.jsx)("p",{className:"text-muted mb-4",children:"Enter your mobile phone and password to access farmer portal."}),(0,n.jsxs)("form",{onSubmit:function(e){return p(e)},children:[(0,n.jsxs)("div",{className:"mb-2",children:[(0,n.jsx)("label",{for:"emailaddress",className:"form-label",children:"Phone number"}),(0,n.jsx)("input",{className:"form-control",type:"tel",defaultValue:r.username,id:"phone",required:!0,name:"username",onChange:m,placeholder:"Enter your phone number"})]}),(0,n.jsxs)("div",{className:"mb-2",children:[(0,n.jsx)(a(),{href:"authrecovery",children:(0,n.jsx)("a",{className:"text-muted float-end",children:(0,n.jsx)("small",{children:"Forgot your password?"})})}),(0,n.jsx)("label",{for:"password",className:"form-label",children:"Password"}),(0,n.jsxs)("div",{className:"input-group input-group-merge",children:[(0,n.jsx)("input",{required:!0,defaultValue:r.password,className:"form-control",type:"password",name:"password",placeholder:"Password",onChange:m}),(0,n.jsx)("div",{className:"input-group-text","data-password":"false",children:(0,n.jsx)("span",{className:"password-eye"})})]})]}),(0,n.jsx)("div",{className:"mb-3",children:(0,n.jsxs)("div",{className:"form-check",children:[(0,n.jsx)("input",{className:"form-check-input",type:"checkbox",id:"checkbox-signin"}),(0,n.jsx)("label",{className:"form-check-label",for:"checkbox-signin",children:"Remember me"})]})}),(0,n.jsx)("div",{className:"d-grid text-center",children:(0,n.jsx)("button",{className:"btn btn-primary",type:"submit",children:"Log In"})})]}),(0,n.jsx)("footer",{className:"footer footer-alt",children:(0,n.jsxs)("p",{className:"text-muted",children:["Don't have an account?"," ",(0,n.jsx)(a(),{href:"register",children:(0,n.jsx)("a",{className:"text-primary fw-medium ms-1",children:"Sign Up"})})]})})]})}}},function(e){e.O(0,[669,774,888,179],(function(){return r=545,e(e.s=r);var r}));var r=e.O();_N_E=r}]);